{"version":3,"file":"static/js/911.99ca814a.chunk.js","mappings":"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","sources":["webpack://myproj/./src/components/Users/Users.module.css?b9d0","webpack://myproj/./src/components/Users/User/User.module.css?cfea","components/Users/User/User.tsx","components/Users/UsersSearchForm/UsersSearch.tsx","components/Users/Users.tsx","webpack://myproj/./src/components/Users/UsersPage.module.css?569f","components/Users/UsersPage.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"users__items\":\"Users_users__items__kjRkX\",\"users\":\"Users_users__nng8B\",\"btn__wrapper\":\"Users_btn__wrapper__KzCLU\",\"hidden\":\"Users_hidden__YW1Eo\",\"noUsers\":\"Users_noUsers__OtkV4\"};","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"User_item__kZJQd\",\"avatar\":\"User_avatar__-f6f1\",\"img__wrap\":\"User_img__wrap__LoBt0\",\"follow\":\"User_follow__RrJXp\",\"info\":\"User_info__CRXA6\",\"info__line\":\"User_info__line__nBflV\"};","\r\nimport { FC } from 'react';\r\nimport s from './User.module.css'\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { ProfileType, UserType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    user: UserType\r\n    follow: (userId: string) => void\r\n    unfollow: (userIt: string) => void\r\n    currentUser: ProfileType | null\r\n    followingInProgress: string[]\r\n}\r\nconst User:FC<PropsType> = ({user, follow, unfollow, currentUser, followingInProgress}) => {\r\n  return (\r\n    <li className={s.item}>\r\n                        <div className={s.avatar}>\r\n                            <div className={s.img__wrap}>\r\n                                <NavLink to={`/profile/${user._id}`}>\r\n                                    <img\r\n                                        src={user.photoUrl}\r\n                                        alt={`Фото ${user.fullname}`}\r\n                                    />\r\n                                </NavLink>\r\n                            </div>\r\n                            {currentUser!.following.some(\r\n                                (id) => id === user._id\r\n                            ) ? (\r\n                                <button\r\n                                    disabled={followingInProgress.some(\r\n                                        (id) => id === user._id\r\n                                    )}\r\n                                    onClick={() => {\r\n                                        unfollow(user._id);\r\n                                    }}\r\n                                    className={s.follow}\r\n                                >\r\n                                    Отписаться\r\n                                </button>\r\n                            ) : (\r\n                                <button\r\n                                    disabled={followingInProgress.some(\r\n                                        (id) => id === user._id\r\n                                    )}\r\n                                    onClick={() => {\r\n                                        follow(user._id);\r\n                                    }}\r\n                                    className={s.follow}\r\n                                >\r\n                                    Подписаться\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className={s.info}>\r\n                            <div className={s.info__line}>\r\n                                <p>{user.fullname}</p>\r\n                                <p\r\n                                >{`${user.location.country}, ${user.location.city}`}</p>\r\n                            </div>\r\n\r\n                            <div>{user.status}</div>\r\n                        </div>\r\n                    </li>\r\n  )\r\n}\r\n\r\nexport default User\r\n","import {\r\n    Field,\r\n    FormikErrors,\r\n    FormikHelpers,\r\n    FormikTouched,\r\n    useFormik,\r\n} from \"formik\";\r\nimport { FC } from \"react\";\r\nimport { FilterType } from \"../../../types/types\";\r\nimport * as yup from \"yup\";\r\nimport { Button, Col, Form, Input, Row, Select } from \"antd\";\r\nimport { SearchOutlined } from \"@ant-design/icons\";\r\n\r\ntype UsersSearchProps = {\r\n    onFilterChange: (filter: FilterType) => void;\r\n    filter: FilterType;\r\n};\r\nexport const UsersSearch: FC<UsersSearchProps> = ({\r\n    onFilterChange,\r\n    filter,\r\n}) => {\r\n    const validationSchema = yup.object().shape({\r\n        term: yup.string().max(255, \"Число введенных символов превышает 255\"),\r\n    });\r\n\r\n    const formik = useFormik<FilterType>({\r\n        onSubmit(\r\n            values: FilterType,\r\n            { setSubmitting }: FormikHelpers<FilterType>\r\n        ) {\r\n            onFilterChange(values);\r\n            setSubmitting(false);\r\n        },\r\n        initialValues: {\r\n            friend: filter.friend || \"\",\r\n            term: filter.term || \"\",\r\n        },\r\n        validationSchema,\r\n        enableReinitialize: true,\r\n    });\r\n    const [form] = Form.useForm();\r\n\r\n    \r\n\r\n    form.setFieldsValue(formik.values);\r\n    return (\r\n        <Row justify=\"center\">\r\n            <Col span={24}>\r\n                <Form form={form} onFinish={formik.handleSubmit}>\r\n                    <Row justify=\"center\" gutter={0}>\r\n                        <Col span={10}>\r\n                            <Form.Item<FilterType>\r\n                                name=\"term\"\r\n                                validateStatus={\r\n                                    formik.errors.term && formik.touched.term\r\n                                        ? \"error\"\r\n                                        : \"\"\r\n                                }\r\n                                help={\r\n                                    formik.errors.term && formik.touched.term\r\n                                        ? formik.errors.term\r\n                                        : \"\"\r\n                                }\r\n                            >\r\n                                <Input\r\n                                    placeholder=\"Введите запрос\"\r\n                                    allowClear\r\n                                    onChange={(value) => {\r\n                                        formik.setFieldValue(\r\n                                            \"term\",\r\n                                            value.currentTarget.value\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col span={3}>\r\n                            <Form.Item<FilterType> name=\"friend\">\r\n                                <Select\r\n                                    onChange={(value) => {\r\n                                        formik.setFieldValue(\"friend\", value);\r\n                                    }}\r\n                                >\r\n                                    <Select.Option value=\"\">Все</Select.Option>\r\n                                    <Select.Option value=\"show\">\r\n                                        Только друзья\r\n                                    </Select.Option>\r\n                                    <Select.Option value=\"noshow\">\r\n                                        Исключить друзей\r\n                                    </Select.Option>\r\n                                </Select>\r\n                            </Form.Item>\r\n                        </Col>\r\n\r\n                        <Col>\r\n                            <Button\r\n                                type=\"primary\"\r\n                                htmlType=\"submit\"\r\n                                icon={<SearchOutlined />}\r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n            </Col>\r\n        </Row>\r\n    );\r\n};\r\n","import { FC, useEffect } from \"react\";\r\nimport { Pagination } from \"antd\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport { compose } from \"redux\";\r\n\r\nimport s from \"./Users.module.css\";\r\nimport User from \"./User/User\";\r\nimport { requestUsers } from \"../../redux/users-reducer\";\r\nimport { UsersSearch } from \"./UsersSearchForm/UsersSearch\";\r\nimport { follow, unfollow } from \"../../redux/authReducer\";\r\nimport { objectToQueryString } from \"../../api/api\";\r\nimport { FilterType } from \"../../types/types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../hooks/redux\";\r\nimport { WithAuthRedirect } from \"../../hoc/withAuthRedirect\";\r\nimport { WithRouter, WithRouterProps } from \"../common/WithRouter/WithRouter\";\r\n\r\ntype PropsType = {};\r\nconst Users: FC<PropsType & WithRouterProps> = ({location, navigate}) => {\r\n    const {users, currentPage, perPage, filter, totalCount, isFetching } = useAppSelector(state => state.usersPage);\r\n    const { followingInProgress } = useAppSelector(state => state.auth);\r\n    const currentUser = useAppSelector(state => state.auth.currentUser);\r\n\r\n\r\n    const dispatch = useAppDispatch()\r\n    const [searchParams] = useSearchParams();\r\n\r\n    useEffect(() => {\r\n        const {\r\n            page,\r\n            perPage: queryPerPage,\r\n            ...paramsObject\r\n        } = Object.fromEntries(searchParams.entries());\r\n\r\n        dispatch(requestUsers({perPage, currentPage: +page || 1, filter:paramsObject as FilterType}));\r\n    }, []);\r\n    useEffect(() => {\r\n        navigate({\r\n            pathname: location.pathname,\r\n            search: objectToQueryString({\r\n                page: currentPage,\r\n                perPage,\r\n                ...filter,\r\n            }),\r\n        });\r\n    }, [filter, currentPage]);\r\n\r\n    const onChangePage = (pageNum: number) => {\r\n        dispatch(requestUsers({perPage, currentPage: pageNum, filter}));\r\n    };\r\n    const onFilterChange = (filter: FilterType) => {\r\n        dispatch(requestUsers({perPage, currentPage:1, filter}));\r\n    };\r\n\r\n    const unfollowCallback = (userId: string) => {\r\n        dispatch(unfollow(userId));\r\n    };\r\n    const followCallback = (userId: string) => {\r\n        dispatch(follow(userId));\r\n    };\r\n\r\n    return (\r\n        <div className={[(isFetching ? s.hidden : \"\"), s.users].join('')}>\r\n            <UsersSearch filter={filter} onFilterChange={onFilterChange} />\r\n            {!users.length && (\r\n                <p className={s.noUsers}>\r\n                    Пользователи с такими данными не найдены.\r\n                </p>\r\n            )}\r\n\r\n            {!!users.length && (\r\n                <>\r\n                    <ul className={s.users__items}>\r\n                        {users.map((user) => (\r\n                            <User\r\n                                key={user._id}\r\n                                user={user}\r\n                                currentUser={currentUser}\r\n                                followingInProgress={followingInProgress}\r\n                                unfollow={unfollowCallback}\r\n                                follow={followCallback}\r\n                            />\r\n                        ))}\r\n                    </ul>\r\n\r\n                    <Pagination\r\n                        total={totalCount}\r\n                        defaultPageSize={perPage}\r\n                        defaultCurrent={currentPage}\r\n                        onChange={onChangePage}\r\n                        showSizeChanger={false}\r\n                    />\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default compose<React.ComponentType>(\r\n    WithAuthRedirect,\r\n    WithRouter<PropsType & WithRouterProps>\r\n)(\r\n    Users\r\n)","// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"UsersPage_wrap__CQsm6\",\"users__title\":\"UsersPage_users__title__ZT5sG\"};","import { FC } from \"react\";\r\n\r\nimport Users from \"./Users\";\r\nimport s from \"./UsersPage.module.css\";\r\nimport { WithAuthRedirect } from \"../../hoc/withAuthRedirect\";\r\nimport { Preloader } from \"../common/Preloader/Preloader\";\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\n\r\ninterface PropsType {}\r\nexport const UsersPage: FC<PropsType> = () => {\r\n    const isFetching = useAppSelector(state => state.usersPage.isFetching)\r\n\r\n    return (\r\n        <div className={s.wrap}>\r\n             <h1 className={s.users__title}>Пользователи</h1>\r\n            {isFetching ? <Preloader /> : null}\r\n            <Users />\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\nexport default WithAuthRedirect(UsersPage)\r\n"],"names":["_ref","user","follow","unfollow","currentUser","followingInProgress","_jsxs","className","s","children","_jsx","NavLink","to","_id","src","photoUrl","alt","fullname","following","some","id","disabled","onClick","location","country","city","status","UsersSearch","onFilterChange","filter","validationSchema","yup","shape","term","max","formik","useFormik","onSubmit","values","_ref2","setSubmitting","initialValues","friend","enableReinitialize","form","Form","useForm","setFieldsValue","Row","justify","Col","span","onFinish","handleSubmit","gutter","Item","name","validateStatus","errors","touched","help","Input","placeholder","allowClear","onChange","value","setFieldValue","currentTarget","Select","Option","Button","type","htmlType","icon","SearchOutlined","compose","WithAuthRedirect","WithRouter","navigate","users","currentPage","perPage","totalCount","isFetching","useAppSelector","state","usersPage","auth","dispatch","useAppDispatch","searchParams","useSearchParams","useEffect","page","queryPerPage","paramsObject","Object","fromEntries","entries","requestUsers","pathname","search","objectToQueryString","unfollowCallback","userId","followCallback","hidden","join","length","noUsers","_Fragment","users__items","map","User","Pagination","total","defaultPageSize","defaultCurrent","pageNum","showSizeChanger","UsersPage","Preloader","Users"],"sourceRoot":""}