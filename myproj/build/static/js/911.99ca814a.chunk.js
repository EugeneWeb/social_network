"use strict";(self.webpackChunkmyproj=self.webpackChunkmyproj||[]).push([[911],{5911:(e,s,r)=>{r.r(s),r.d(s,{UsersPage:()=>G,default:()=>O});var n=r(5043),l=r(3463),t=r(5475),i=r(805);const a={users__items:"Users_users__items__kjRkX",users:"Users_users__nng8B",btn__wrapper:"Users_btn__wrapper__KzCLU",hidden:"Users_hidden__YW1Eo",noUsers:"Users_noUsers__OtkV4"},o="User_item__kZJQd",c="User_avatar__-f6f1",d="User_img__wrap__LoBt0",u="User_follow__RrJXp",h="User_info__CRXA6",_="User_info__line__nBflV";var m=r(579);const j=e=>{let{user:s,follow:r,unfollow:n,currentUser:l,followingInProgress:i}=e;return(0,m.jsxs)("li",{className:o,children:[(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("div",{className:d,children:(0,m.jsx)(t.k2,{to:`/profile/${s._id}`,children:(0,m.jsx)("img",{src:s.photoUrl,alt:`\u0424\u043e\u0442\u043e ${s.fullname}`})})}),l.following.some((e=>e===s._id))?(0,m.jsx)("button",{disabled:i.some((e=>e===s._id)),onClick:()=>{n(s._id)},className:u,children:"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"}):(0,m.jsx)("button",{disabled:i.some((e=>e===s._id)),onClick:()=>{r(s._id)},className:u,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})]}),(0,m.jsxs)("div",{className:h,children:[(0,m.jsxs)("div",{className:_,children:[(0,m.jsx)("p",{children:s.fullname}),(0,m.jsx)("p",{children:`${s.location.country}, ${s.location.city}`})]}),(0,m.jsx)("div",{children:s.status})]})]})};var g=r(9262),x=r(3516),f=r(899),p=r(1588),A=r(7419),U=r(1645),v=r(1982),w=r(2431),P=r(6426),C=r(2058);const b=e=>{let{onFilterChange:s,filter:r}=e;const n=f.Ik().shape({term:f.Yj().max(255,"\u0427\u0438\u0441\u043b\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 255")}),l=(0,x.Wx)({onSubmit(e,r){let{setSubmitting:n}=r;s(e),n(!1)},initialValues:{friend:r.friend||"",term:r.term||""},validationSchema:n,enableReinitialize:!0}),[t]=p.A.useForm();return t.setFieldsValue(l.values),(0,m.jsx)(A.A,{justify:"center",children:(0,m.jsx)(U.A,{span:24,children:(0,m.jsx)(p.A,{form:t,onFinish:l.handleSubmit,children:(0,m.jsxs)(A.A,{justify:"center",gutter:0,children:[(0,m.jsx)(U.A,{span:10,children:(0,m.jsx)(p.A.Item,{name:"term",validateStatus:l.errors.term&&l.touched.term?"error":"",help:l.errors.term&&l.touched.term?l.errors.term:"",children:(0,m.jsx)(v.A,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441",allowClear:!0,onChange:e=>{l.setFieldValue("term",e.currentTarget.value)}})})}),(0,m.jsx)(U.A,{span:3,children:(0,m.jsx)(p.A.Item,{name:"friend",children:(0,m.jsxs)(w.A,{onChange:e=>{l.setFieldValue("friend",e)},children:[(0,m.jsx)(w.A.Option,{value:"",children:"\u0412\u0441\u0435"}),(0,m.jsx)(w.A.Option,{value:"show",children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u0440\u0443\u0437\u044c\u044f"}),(0,m.jsx)(w.A.Option,{value:"noshow",children:"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"})]})})}),(0,m.jsx)(U.A,{children:(0,m.jsx)(P.Ay,{type:"primary",htmlType:"submit",icon:(0,m.jsx)(C.A,{})})})]})})})})};var k=r(2018),N=r(6258),y=r(47),F=r(5751),V=r(9746);const I=(0,i.Zz)(F.$,V.K)((e=>{let{location:s,navigate:r}=e;const{users:i,currentPage:o,perPage:c,filter:d,totalCount:u,isFetching:h}=(0,y.GV)((e=>e.usersPage)),{followingInProgress:_}=(0,y.GV)((e=>e.auth)),x=(0,y.GV)((e=>e.auth.currentUser)),f=(0,y.jL)(),[p]=(0,t.ok)();(0,n.useEffect)((()=>{const{page:e,perPage:s,...r}=Object.fromEntries(p.entries());f((0,g.AI)({perPage:c,currentPage:+e||1,filter:r}))}),[]),(0,n.useEffect)((()=>{r({pathname:s.pathname,search:(0,N.cX)({page:o,perPage:c,...d})})}),[d,o]);const A=e=>{f((0,k.X2)(e))},U=e=>{f((0,k.e6)(e))};return(0,m.jsxs)("div",{className:[h?a.hidden:"",a.users].join(""),children:[(0,m.jsx)(b,{filter:d,onFilterChange:e=>{f((0,g.AI)({perPage:c,currentPage:1,filter:e}))}}),!i.length&&(0,m.jsx)("p",{className:a.noUsers,children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0442\u0430\u043a\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b."}),!!i.length&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("ul",{className:a.users__items,children:i.map((e=>(0,m.jsx)(j,{user:e,currentUser:x,followingInProgress:_,unfollow:A,follow:U},e._id)))}),(0,m.jsx)(l.A,{total:u,defaultPageSize:c,defaultCurrent:o,onChange:e=>{f((0,g.AI)({perPage:c,currentPage:e,filter:d}))},showSizeChanger:!1})]})]})})),S="UsersPage_wrap__CQsm6",$="UsersPage_users__title__ZT5sG";var z=r(2915);const G=()=>{const e=(0,y.GV)((e=>e.usersPage.isFetching));return(0,m.jsxs)("div",{className:S,children:[(0,m.jsx)("h1",{className:$,children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),e?(0,m.jsx)(z.Z,{}):null,(0,m.jsx)(I,{})]})},O=(0,F.$)(G)}}]);
//# sourceMappingURL=911.99ca814a.chunk.js.map