"use strict";(self.webpackChunkmyproj=self.webpackChunkmyproj||[]).push([[658],{8658:function(e,r,n){n.r(r),n.d(r,{UsersPage:function(){return L},default:function(){return B}});var s=n(1413),t=n(5987),i=n(9439),a=n(2791),l=n(6834),o=n(1087),c=n(7781),u={users__items:"Users_users__items__kjRkX",users:"Users_users__nng8B",btn__wrapper:"Users_btn__wrapper__KzCLU",hidden:"Users_hidden__YW1Eo",noUsers:"Users_noUsers__OtkV4"},d="User_item__kZJQd",f="User_avatar__-f6f1",h="User_img__wrap__LoBt0",_="User_follow__RrJXp",m="User_info__CRXA6",j="User_info__line__nBflV",g=n(184),p=function(e){var r=e.user,n=e.follow,s=e.unfollow,t=e.currentUser,i=e.followingInProgress;return(0,g.jsxs)("li",{className:d,children:[(0,g.jsxs)("div",{className:f,children:[(0,g.jsx)("div",{className:h,children:(0,g.jsx)(o.OL,{to:"/profile/".concat(r._id),children:(0,g.jsx)("img",{src:r.photoUrl,alt:"\u0424\u043e\u0442\u043e ".concat(r.fullname)})})}),t.following.some((function(e){return e===r._id}))?(0,g.jsx)("button",{disabled:i.some((function(e){return e===r._id})),onClick:function(){s(r._id)},className:_,children:"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"}):(0,g.jsx)("button",{disabled:i.some((function(e){return e===r._id})),onClick:function(){n(r._id)},className:_,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})]}),(0,g.jsxs)("div",{className:m,children:[(0,g.jsxs)("div",{className:j,children:[(0,g.jsx)("p",{children:r.fullname}),(0,g.jsx)("p",{children:"".concat(r.location.country,", ").concat(r.location.city)})]}),(0,g.jsx)("div",{children:r.status})]})]})},x=n(5732),Z=n(5705),v=n(8007),U=n(3486),C=n(6106),P=n(914),w=n(177),b=n(8497),N=n(6559),k=n(1730),y=function(e){var r=e.onFilterChange,n=e.filter,s=v.Ry().shape({term:v.Z_().max(255,"\u0427\u0438\u0441\u043b\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 255")}),t=(0,Z.TA)({onSubmit:function(e,n){var s=n.setSubmitting;r(e),s(!1)},initialValues:{friend:n.friend||"",term:n.term||""},validationSchema:s,enableReinitialize:!0}),a=U.Z.useForm(),l=(0,i.Z)(a,1)[0];return l.setFieldsValue(t.values),(0,g.jsx)(C.Z,{justify:"center",children:(0,g.jsx)(P.Z,{span:24,children:(0,g.jsx)(U.Z,{form:l,onFinish:t.handleSubmit,children:(0,g.jsxs)(C.Z,{justify:"center",gutter:0,children:[(0,g.jsx)(P.Z,{span:10,children:(0,g.jsx)(U.Z.Item,{name:"term",validateStatus:t.errors.term&&t.touched.term?"error":"",help:t.errors.term&&t.touched.term?t.errors.term:"",children:(0,g.jsx)(w.Z,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441",allowClear:!0,onChange:function(e){t.setFieldValue("term",e.currentTarget.value)}})})}),(0,g.jsx)(P.Z,{span:3,children:(0,g.jsx)(U.Z.Item,{name:"friend",children:(0,g.jsxs)(b.Z,{onChange:function(e){t.setFieldValue("friend",e)},children:[(0,g.jsx)(b.Z.Option,{value:"",children:"\u0412\u0441\u0435"}),(0,g.jsx)(b.Z.Option,{value:"show",children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u0440\u0443\u0437\u044c\u044f"}),(0,g.jsx)(b.Z.Option,{value:"noshow",children:"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"})]})})}),(0,g.jsx)(P.Z,{children:(0,g.jsx)(N.ZP,{type:"primary",htmlType:"submit",icon:(0,g.jsx)(k.Z,{})})})]})})})})},F=n(2634),S=n(4098),O=n(8660),V=n(2932),G=n(104),I=["page","perPage"],R=(0,c.qC)(V.e,G.W)((function(e){var r=e.location,n=e.navigate,c=(0,O.CG)((function(e){return e.usersPage})),d=c.users,f=c.currentPage,h=c.perPage,_=c.filter,m=c.totalCount,j=c.isFetching,Z=(0,O.CG)((function(e){return e.auth})).followingInProgress,v=(0,O.CG)((function(e){return e.auth.currentUser})),U=(0,O.TL)(),C=(0,o.lr)(),P=(0,i.Z)(C,1)[0];(0,a.useEffect)((function(){var e=Object.fromEntries(P.entries()),r=e.page,n=(e.perPage,(0,t.Z)(e,I));U((0,x.D7)({perPage:h,currentPage:+r||1,filter:n}))}),[]),(0,a.useEffect)((function(){n({pathname:r.pathname,search:(0,S.nZ)((0,s.Z)({page:f,perPage:h},_))})}),[_,f]);var w=function(e){U((0,F.fv)(e))},b=function(e){U((0,F.ZN)(e))};return(0,g.jsxs)("div",{className:[j?u.hidden:"",u.users].join(""),children:[(0,g.jsx)(y,{filter:_,onFilterChange:function(e){U((0,x.D7)({perPage:h,currentPage:1,filter:e}))}}),!d.length&&(0,g.jsx)("p",{className:u.noUsers,children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0442\u0430\u043a\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b."}),!!d.length&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("ul",{className:u.users__items,children:d.map((function(e){return(0,g.jsx)(p,{user:e,currentUser:v,followingInProgress:Z,unfollow:w,follow:b},e._id)}))}),(0,g.jsx)(l.Z,{total:m,defaultPageSize:h,defaultCurrent:f,onChange:function(e){U((0,x.D7)({perPage:h,currentPage:e,filter:_}))},showSizeChanger:!1})]})]})})),T="UsersPage_wrap__CQsm6",z="UsersPage_users__title__ZT5sG",E=n(94),L=function(){var e=(0,O.CG)((function(e){return e.usersPage.isFetching}));return(0,g.jsxs)("div",{className:T,children:[(0,g.jsx)("h1",{className:z,children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),e?(0,g.jsx)(E.p,{}):null,(0,g.jsx)(R,{})]})},B=(0,V.e)(L)}}]);
//# sourceMappingURL=658.16d65b8c.chunk.js.map